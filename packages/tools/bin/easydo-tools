#!/usr/bin/env node

const { performance } = require('perf_hooks')

if (!__dirname.includes('node_modules')) {
  try {
    require('source-map-support').install()
  } catch (e) {

  }
}

global.__tools_start_time = performance.now()

const debugIndex = process.argv.findIndex(arg => /^(?:-d|--debug)$/.test(arg))

if (debugIndex >= 0) {
  process.env.EASYDO_TOOLS_LOG_LEVEL = 'debug'
}

function start() {
  const importLocal = require('import-local')
  if (importLocal(__filename)) {
    console.log('using local version of cli')
  } else {
    require('../dist/node/cli')
  }
}

start()
